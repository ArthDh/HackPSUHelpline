{% extends "layout.html" %}
{% import "macros.html" as m %}

{% block head %}
    {{ super() }}
    <!-- Leaflet JS -->
    <script src='https://api.tiles.mapbox.com/mapbox.js/v2.1.9/mapbox.js'></script>
    <!-- Leaflet CSS -->
    <link href='https://api.tiles.mapbox.com/mapbox.js/v2.1.9/mapbox.css' rel='stylesheet'/>
{% endblock %}

{% block content %}

    {{ m.map() }}
    
    <script type="text/javascript">
        var trafficLayer = new google.maps.TrafficLayer();
        trafficLayer.setMap(map);
    </script>
    
    <script type="text/javascript">
      setTimeout(function(){
         fetch('/api/getInNeedRequester')
          .then((resp) => resp.json()) // Transform the data into json
          .then(function(data) {
                // console.log(data);
                var req;
                for (req in data){
                    placeMarker(map, data[req]);
                }
            }).catch(function(error) {
            console.log(error);
          });
          },7000)

    </script>


{% endblock %}
